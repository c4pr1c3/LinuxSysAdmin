<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta name="author" content="é»„ç®" />
  <title>Linuxç³»ç»Ÿä¸ç½‘ç»œç®¡ç†</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<header id="title-block-header">
<h1 class="title">Linuxç³»ç»Ÿä¸ç½‘ç»œç®¡ç†</h1>
<p class="author">é»„ç®</p>
</header>
<h1 id="ç¬¬å…­ç« ç½‘ç»œèµ„æºå…±äº«">ç¬¬å…­ç« ï¼šç½‘ç»œèµ„æºå…±äº«</h1>
<hr />
<h2 id="keep-things-shared-and-synchronized">Keep Things Shared and Synchronized</h2>
<h1 id="ç»å…¸æ–‡ä»¶å…±äº«æœåŠ¡">ç»å…¸æ–‡ä»¶å…±äº«æœåŠ¡</h1>
<hr />
<ul>
<li>FTP</li>
<li>NFS</li>
<li>SMB/CIFS</li>
</ul>
<h1 id="ftp"><a href="https://help.ubuntu.com/lts/serverguide/ftp-server.html.en">FTP</a></h1>
<hr />
<blockquote>
<p>File Transfer Protocol (FTP) is a TCP protocol for downloading files between computers. In the past, it has also been used for uploading but, as that method does not use encryption, user credentials as well as data transferred in the clear and are easily intercepted.</p>
</blockquote>
<ul>
<li>è®¡ç®—æœºä¹‹é—´<strong>ä¸‹è½½</strong>æ–‡ä»¶ä¹‹ç”¨</li>
<li>æ˜æ–‡æ•°æ®ä¼ è¾“ï¼Œæ˜“è¢«æ‹¦æˆªï¼ˆç¯¡æ”¹ï¼‰</li>
<li><strong>å®¢æˆ·ç«¯/æœåŠ¡å™¨</strong>é€šä¿¡æ¨¡å‹</li>
</ul>
<hr />
<p>å¸¸è§FTPæœåŠ¡å™¨è½¯ä»¶</p>
<ul>
<li>ftpd</li>
<li>vsftpd</li>
<li>proftpd</li>
<li>pure-ftpd</li>
</ul>
<div class="sourceCode" id="cb1"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1"></a><span class="ex">apt-cache</span> show ftpd vsftpd proftpd-basic pure-ftpd <span class="kw">|</span> <span class="fu">grep</span> -A 5 Description-en</span>
<span id="cb1-2"><a href="#cb1-2"></a></span>
<span id="cb1-3"><a href="#cb1-3"></a><span class="co"># ftpd: File Transfer Protocol (FTP) server This is the netkit ftp server. You are recommended to use one of its alternatives, such as vsftpd, proftpd, or pure-ftpd</span></span>
<span id="cb1-4"><a href="#cb1-4"></a></span>
<span id="cb1-5"><a href="#cb1-5"></a><span class="co"># vsftpd: lightweight, efficient FTP server written for security This package provides the &quot;Very Secure FTP Daemon&quot;, written from the ground up with security in mind.</span></span>
<span id="cb1-6"><a href="#cb1-6"></a></span>
<span id="cb1-7"><a href="#cb1-7"></a><span class="co"># proftpd: Versatile, virtual-hosting FTP daemon - binaries ProFTPD is a powerful modular FTP/SFTP/FTPS server</span></span>
<span id="cb1-8"><a href="#cb1-8"></a></span>
<span id="cb1-9"><a href="#cb1-9"></a><span class="co"># pure-ftpd: Secure and efficient FTP server Free, secure, production-quality and standard-conformant FTP server.</span></span></code></pre></div>
<hr />
<p>æ¯”è¾ƒ&amp;é€‰æ‹©ï¼Ÿ</p>
<p>Google: ftpd vsftpd proftpd pure-ftpd comparison</p>
<p>ä¸€äº›å¯ä¾›å‚è€ƒçš„è¯„ä»·å› ç´ ï¼š</p>
<ul>
<li>åŠŸèƒ½ç‰¹æ€§æ˜¯å¦æ»¡è¶³éœ€æ±‚</li>
<li>æ€§èƒ½å’Œå¯æ‰©å±•æ€§æ˜¯å¦æ»¡è¶³éœ€æ±‚</li>
<li>å®‰å…¨æ€§
<ul>
<li><a href="https://www.cvedetails.com/product/9804/Ftpd-Ftpd.html?vendor_id=5802">ftpd</a> / <a href="https://www.cvedetails.com/product/3475/Beasts-Vsftpd.html?vendor_id=2041">vsftpd</a> / <a href="https://www.cvedetails.com/product/353/Proftpd-Project-Proftpd.html?vendor_id=204">proftpd</a> / <a href="https://www.cvedetails.com/vendor/2152/Pureftpd.html">pure-ftpd</a></li>
</ul></li>
</ul>
<hr />
<h3 id="w2h-ç†è®ºæŒ‡å¯¼æŠ€æœ¯æ–¹æ¡ˆé€‰å‹-12">5W2H ç†è®ºæŒ‡å¯¼æŠ€æœ¯æ–¹æ¡ˆé€‰å‹ (1/2)</h3>
<ul>
<li>What åŠŸèƒ½ç‰¹æ€§åˆ—è¡¨ã€å®‰å…¨ç‰¹æ€§åˆ—è¡¨</li>
<li>Why éœ€æ±‚ä¼˜å…ˆçº§åˆ—è¡¨ï¼šåŠŸèƒ½å’Œéœ€æ±‚ä¸€æ¬¡æ€§åŒ¹é…åº¦ï¼ˆå‡å°‘äºŒæ¬¡å¼€å‘æˆæœ¬ï¼‰ã€æ˜“ç”¨æ€§ã€æ˜“ç»´æŠ¤æ€§ã€æ€§èƒ½ã€ä»·æ ¼ï¼ˆä¸€æ¬¡æ€§ä¹°æ–­ or è®¢é˜…æŒç»­ä»˜è´¹ï¼‰ï¼Œå­°å…ˆå­°åï¼Ÿ</li>
<li>Who é¡¹ç›®çš„å‘èµ·å’Œç»´æŠ¤è€…æ˜¯è°ï¼Ÿå•†ä¸šå…¬å¸ or å¼€æºç¤¾åŒº or ä¸ªäººï¼Ÿ</li>
<li>Where æˆåŠŸæ¡ˆä¾‹éƒ½æœ‰å“ªäº›ï¼Ÿæ˜¯å¦å¼€æºï¼Ÿä¸é€‚åˆçš„åœºæ™¯æœ‰å“ªäº›ï¼Ÿ</li>
</ul>
<hr />
<h3 id="w2h-ç†è®ºæŒ‡å¯¼æŠ€æœ¯æ–¹æ¡ˆé€‰å‹-22">5W2H ç†è®ºæŒ‡å¯¼æŠ€æœ¯æ–¹æ¡ˆé€‰å‹ (2/2)</h3>
<ul>
<li>When é¡¹ç›®çš„æœ€è¿‘ä¸€æ¬¡æ›´æ–°æ—¶é—´ï¼Ÿé¡¹ç›®å†å²ï¼Ÿ</li>
<li>How é¡¹ç›®æŠ€æœ¯æ ˆï¼Ÿæ˜¯å¦å’Œå½“å‰éœ€æ±‚åœºæ™¯ä½¿ç”¨çš„ä¸»è¦æŠ€æœ¯æ ˆé›†æˆï¼Ÿ</li>
<li>How Much æ€§èƒ½ï¼Ÿå¼€å‘æˆæœ¬ï¼ˆäººåŠ›æŠ•å…¥ã€æ—¶é—´æŠ•å…¥ã€æˆæƒè´¹ç”¨ã€ä¾èµ–è½¯ç¡¬ä»¶é‡‡è´­è´¹ç”¨ç­‰ï¼‰</li>
</ul>
<h1 id="ftp-configuration-task">FTPæœåŠ¡å™¨é…ç½®ä»»åŠ¡</h1>
<hr />
<p>è¯·è‡ªè¡Œæ ¹æ®ä»¥ä¸‹ä»»åŠ¡éœ€æ±‚ä»ä»¥ä¸ŠFTPæœåŠ¡å™¨è½¯ä»¶ä¸­é€‰æ‹©ä¸€æ¬¾æ»¡è¶³æ‰€æœ‰ä»»åŠ¡è¦æ±‚çš„FTPæœåŠ¡å™¨è¿›è¡Œå®‰è£…é…ç½®å®éªŒ</p>
<ul class="task-list">
<li><input type="checkbox" disabled="" />
é…ç½®ä¸€ä¸ªæä¾›åŒ¿åè®¿é—®çš„FTPæœåŠ¡å™¨ï¼ŒåŒ¿åè®¿é—®è€…å¯ä»¥è®¿é—®1ä¸ªç›®å½•ä¸”ä»…æ‹¥æœ‰è¯¥ç›®å½•åŠå…¶æ‰€æœ‰å­ç›®å½•çš„åªè¯»è®¿é—®æƒé™ï¼›</li>
<li><input type="checkbox" disabled="" />
é…ç½®ä¸€ä¸ªæ”¯æŒç”¨æˆ·åå’Œå¯†ç æ–¹å¼è®¿é—®çš„è´¦å·ï¼Œè¯¥è´¦å·ç»§æ‰¿åŒ¿åè®¿é—®è€…æ‰€æœ‰æƒé™ï¼Œä¸”æ‹¥æœ‰å¯¹å¦1ä¸ªç‹¬ç«‹ç›®å½•åŠå…¶å­ç›®å½•å®Œæ•´è¯»å†™ï¼ˆåŒ…æ‹¬åˆ›å»ºç›®å½•ã€ä¿®æ”¹æ–‡ä»¶ã€åˆ é™¤æ–‡ä»¶ç­‰ï¼‰æƒé™ï¼›<ul>
<li>è¯¥è´¦å·ä»…å¯ç”¨äºFTPæœåŠ¡è®¿é—®ï¼Œä¸èƒ½ç”¨äºç³»ç»Ÿshellç™»å½•ï¼›</li>
</ul></li>
</ul>
<p><strong><em>to be continued</em></strong> â€¦</p>
<hr />
<p><strong><em>resumed</em></strong></p>
<ul class="task-list">
<li><input type="checkbox" disabled="" />
FTPç”¨æˆ·ä¸èƒ½è¶Šæƒè®¿é—®æŒ‡å®šç›®å½•ä¹‹å¤–çš„ä»»æ„å…¶ä»–ç›®å½•å’Œæ–‡ä»¶ï¼›</li>
<li><input type="checkbox" disabled="" />
åŒ¿åè®¿é—®æƒé™ä»…é™ç™½åå•IPæ¥æºç”¨æˆ·è®¿é—®ï¼Œç¦æ­¢ç™½åå•IPä»¥å¤–çš„è®¿é—®ï¼›</li>
<li><input type="checkbox" disabled="" />
ï¼ˆå¯é€‰åŠ åˆ†ä»»åŠ¡ï¼‰ä½¿ç”¨FTPSæœåŠ¡ä»£æ›¿FTPæœåŠ¡ï¼Œä¸Šè¿°æ‰€æœ‰è¦æ±‚åœ¨FTPSæœåŠ¡ä¸­åŒæ—¶å¾—åˆ°æ»¡è¶³ï¼›</li>
</ul>
<h1 id="nfs"><a href="https://help.ubuntu.com/16.04/serverguide/network-file-system.html">NFS</a></h1>
<hr />
<p>NFSå…è®¸ç³»ç»Ÿå°†å…¶ç›®å½•å’Œæ–‡ä»¶å…±äº«ç»™ç½‘ç»œä¸Šçš„å…¶ä»–ç³»ç»Ÿã€‚é€šè¿‡NFSï¼Œç”¨æˆ·å’Œåº”ç”¨ç¨‹åºå¯ä»¥åƒè®¿é—®æœ¬åœ°æ–‡ä»¶ä¸€æ ·è®¿é—®è¿œç¨‹ç³»ç»Ÿä¸Šçš„æ–‡ä»¶ã€‚</p>
<hr />
<h2 id="nfs-config-task">NFSæœåŠ¡å™¨é…ç½®ä»»åŠ¡</h2>
<ul class="task-list">
<li><input type="checkbox" disabled="" />
åœ¨1å°Linuxä¸Šé…ç½®NFSæœåŠ¡ï¼Œå¦1å°ç”µè„‘ä¸Šé…ç½®NFSå®¢æˆ·ç«¯æŒ‚è½½2ä¸ªæƒé™ä¸åŒçš„å…±äº«ç›®å½•ï¼Œåˆ†åˆ«å¯¹åº”åªè¯»è®¿é—®å’Œè¯»å†™è®¿é—®æƒé™ï¼›</li>
<li><input type="checkbox" disabled="" />
å®éªŒæŠ¥å‘Šä¸­è¯·è®°å½•ä½ åœ¨NFSå®¢æˆ·ç«¯ä¸Šçœ‹åˆ°çš„ï¼š<ul>
<li>å…±äº«ç›®å½•ä¸­æ–‡ä»¶ã€å­ç›®å½•çš„å±ä¸»ã€æƒé™ä¿¡æ¯</li>
<li>ä½ é€šè¿‡NFSå®¢æˆ·ç«¯åœ¨NFSå…±äº«ç›®å½•ä¸­æ–°å»ºçš„ç›®å½•ã€åˆ›å»ºçš„æ–‡ä»¶çš„å±ä¸»ã€æƒé™ä¿¡æ¯</li>
<li>ä¸Šè¿°å…±äº«ç›®å½•ä¸­æ–‡ä»¶ã€å­ç›®å½•çš„å±ä¸»ã€æƒé™ä¿¡æ¯å’Œåœ¨NFSæœåŠ¡å™¨ç«¯ä¸ŠæŸ¥çœ‹åˆ°çš„ä¿¡æ¯ä¸€æ ·å—ï¼Ÿæ— è®ºæ˜¯å¦ä¸€è‡´ï¼Œè¯·ç»™å‡ºä½ æŸ¥åˆ°çš„èµ„æ–™æ˜¯å¦‚ä½•è®²è§£NFSç›®å½•ä¸­çš„å±ä¸»å’Œå±ä¸»ç»„ä¿¡æ¯åº”è¯¥å¦‚ä½•æ­£ç¡®è§£è¯»</li>
</ul></li>
</ul>
<p><strong><em>to be continued</em></strong> â€¦</p>
<hr />
<p><strong><em>resumed</em></strong></p>
<ul class="task-list">
<li><input type="checkbox" disabled="" />
ï¼ˆå¯é€‰ä»»åŠ¡ï¼‰åœ¨å®¢æˆ·ç«¯æˆ–NFSæœåŠ¡å™¨ä¸ŠæŠ“åŒ…åˆ†æä½¿ç”¨NFSåè®®æ—¶çš„è¿œç¨‹æ–‡ä»¶ä¸‹è½½ã€ä¸Šä¼ ã€ç§»åŠ¨ã€åˆ é™¤ç­‰æ“ä½œæ˜¯å¦æ˜¯æ˜æ–‡ï¼Ÿè¿œç¨‹çš„æ–‡ä»¶ä¼ è¾“æ•°æ®æµæ˜¯å¦å¯ä»¥è¢«æ¢å¤å‡ºå®Œæ•´çš„ä¼ è¾“æ–‡ä»¶ï¼Ÿ</li>
</ul>
<h1 id="smbcifsheading">SMB/CIFS</h1>
<hr />
<h2 id="smbcifs">SMB/CIFS â€”â€” ğŸŒ°</h2>
<p><img src="images/chap0x06/smb_demo.png" /></p>
<hr />
<h2 id="smbä¸cifsçš„å…³ç³»"><a href="https://msdn.microsoft.com/zh-cn/library/windows/desktop/aa365233(v=vs.85).aspx">SMBä¸CIFSçš„å…³ç³»</a></h2>
<blockquote>
<p>The Server Message Block (SMB) Protocol is a network file sharing protocol, and as implemented in Microsoft Windows is known as Microsoft SMB Protocol. The set of message packets that defines a particular version of the protocol is called a dialect. The Common Internet File System (CIFS) Protocol is a dialect of SMB. Both SMB and CIFS are also available on VMS, several versions of Unix, and other operating systems.</p>
</blockquote>
<hr />
<p>CIFSåè®®æ˜¯SMBåè®®çš„ä¸€ä¸ªæœ¬åœ°åŒ–å®ç°ï¼ˆdialectï¼Œç›´è¯‘ä¸ºâ€œæ–¹è¨€â€)ï¼Œåè®®è®¾è®¡çš„åˆè¡·æ˜¯æ–‡ä»¶å…±äº«ï¼Œä½†å¾®è½¯çš„SMBåè®®è¿˜æä¾›äº†ä¸€äº›é¢å¤–åŠŸèƒ½ï¼š</p>
<ul>
<li>Dialect negotiation</li>
<li>Determining other Microsoft SMB Protocol servers on the network, or network browsing</li>
<li>Printing over a network</li>
<li>File, directory, and share access authentication</li>
<li>File and record locking</li>
<li>File and directory change notification</li>
<li>Extended file attribute handling</li>
<li>Unicode support</li>
<li>Opportunistic locks</li>
</ul>
<hr />
<ul>
<li>æŒ‰ç…§OSIç½‘ç»œæ¨¡å‹ï¼Œå¾®è½¯SMBåè®®å¸¸è¢«å½’ç±»åˆ°åº”ç”¨å±‚æˆ–è¡¨ç¤ºå±‚åè®®ã€‚</li>
<li>å¾®è½¯SMBæ•°æ®ä¼ è¾“é€šå¸¸ä½¿ç”¨NetBIOS over TCP/IP (NBT)ï¼Œä½†ä»…ä»…æ˜¯ä¸ºäº†åå‘å…¼å®¹æ€§éœ€è¦ã€‚å®é™…ä¸Šï¼Œè¿™å¹¶ä¸æ˜¯SMBåè®®å”¯ä¸€çš„ä¼ è¾“å±‚åè®®é€‰æ‹©ã€‚</li>
<li>å¾®è½¯SMBåè®®é‡‡ç”¨<strong>å®¢æˆ·ç«¯-æœåŠ¡å™¨</strong>æ¨¡å¼å®ç°ï¼Œç”±ä¸€ç³»åˆ—å®¢æˆ·ç«¯è¯·æ±‚å’ŒæœåŠ¡å™¨å“åº”æ•°æ®æ„æˆï¼š
<ul>
<li>ä¼šè¯æ§åˆ¶æŠ¥æ–‡â€”å’Œå…±äº«æœåŠ¡èµ„æºå»ºç«‹å’Œæ–­å¼€è¿æ¥</li>
<li>æ–‡ä»¶è®¿é—®æŠ¥æ–‡â€”è®¿é—®å’Œæ§åˆ¶è¿œç¨‹æœåŠ¡å™¨ä¸Šæ–‡ä»¶å’Œç›®å½•</li>
<li>é€šç”¨æ¶ˆæ¯æŠ¥æ–‡â€”å‘é€æ•°æ®åˆ°æ‰“å°é˜Ÿåˆ—ã€é‚®ä»¶æŠ•é€’æ¥å£ã€å‘½åç®¡é“ï¼Œå¹¶æä¾›æ‰“å°é˜Ÿåˆ—çŠ¶æ€ä¿¡æ¯</li>
</ul></li>
</ul>
<p>æŸäº›æ•°æ®æŠ¥æ–‡ä¼šåˆ†ç»„æ‰“åŒ…åœ¨ä¸€æ¬¡æ•°æ®ä¼ è¾“ä¸­ä»¥é™ä½å“åº”å»¶è¿Ÿå’Œæé«˜å¸¦å®½åˆ©ç”¨ç‡ï¼Œè¿™ç§æ–¹æ³•è¢«ç§°ä¸ºâ€œæ‰¹å¤„ç†â€ã€‚</p>
<h1 id="sambaheading">Samba</h1>
<hr />
<blockquote>
<p><a href="https://help.ubuntu.com/lts/serverguide/samba-introduction.html">ä¸ºWindowsç¯å¢ƒæä¾›å’Œæ•´åˆå¸¸ç”¨æœåŠ¡</a></p>
</blockquote>
<ul>
<li><strong>æ–‡ä»¶å’Œæ‰“å°æœºå…±äº«æœåŠ¡</strong>ã€‚SMBåè®®å¯ä»¥ä½¿åœ¨ç½‘ç»œä¸Šå…±äº«æ–‡ä»¶ã€æ–‡ä»¶å¤¹ã€å·å’Œæ‰“å°æœºå˜å¾—å®¹æ˜“ã€‚</li>
<li><strong>ç›®å½•æœåŠ¡</strong>ã€‚é€šè¿‡ LDAP(Lightweight Directory Access Protocolï¼Œè½»é‡ç›®å½•è®¿é—®åè®®) å’Œ Microsoft Active DirectoryÂ® æŠ€æœ¯æ¥å…±äº«ç½‘ç»œè®¡ç®—æœºå’Œç”¨æˆ·çš„é‡è¦ä¿¡æ¯ã€‚</li>
<li><strong>è®¤è¯å’Œæƒé™</strong>ã€‚å»ºç«‹ç½‘ç»œè®¡ç®—æœºå’Œç”¨æˆ·çš„èº«ä»½ä¿¡æ¯ï¼Œå¹¶é€šè¿‡ä½¿ç”¨æ–‡ä»¶æƒé™ã€ç»„ç­–ç•¥å’Œ Kerberos è®¤è¯æœåŠ¡ç­‰åŸç†å’ŒæŠ€æœ¯æ¥ç¡®å®šè®¡ç®—æœºæˆ–ç”¨æˆ·å¯ä»¥è®¿é—®çš„ä¿¡æ¯ã€‚</li>
</ul>
<hr />
<h2 id="å®‰è£…å’Œé…ç½®sambaç‹¬ç«‹å…±äº«æœåŠ¡å™¨"><a href="https://wiki.samba.org/index.php/Setting_up_Samba_as_a_Standalone_Server">å®‰è£…å’Œé…ç½®Sambaç‹¬ç«‹å…±äº«æœåŠ¡å™¨</a></h2>
<ul>
<li>Linuxè®¾ç½®ç”¨æˆ·åå¯†ç æ–¹å¼çš„å…±äº«ç›®å½•</li>
</ul>
<div class="sourceCode" id="cb2"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1"></a><span class="co"># å®‰è£…SambaæœåŠ¡å™¨</span></span>
<span id="cb2-2"><a href="#cb2-2"></a><span class="fu">sudo</span> apt-get install samba</span>
<span id="cb2-3"><a href="#cb2-3"></a></span>
<span id="cb2-4"><a href="#cb2-4"></a><span class="co"># åˆ›å»ºSambaå…±äº«ä¸“ç”¨çš„ç”¨æˆ·</span></span>
<span id="cb2-5"><a href="#cb2-5"></a><span class="fu">sudo</span> useradd -M -s /sbin/nologin demoUser</span>
<span id="cb2-6"><a href="#cb2-6"></a><span class="fu">sudo</span> groupadd demoGroup</span>
<span id="cb2-7"><a href="#cb2-7"></a><span class="fu">sudo</span> usermod -a -G demoGroup demoUser</span>
<span id="cb2-8"><a href="#cb2-8"></a><span class="fu">sudo</span> passwd demoUser</span>
<span id="cb2-9"><a href="#cb2-9"></a><span class="co"># åˆ›å»ºçš„ç”¨æˆ·å¿…é¡»æœ‰ä¸€ä¸ªåŒåçš„Linuxç”¨æˆ·ï¼Œå¯†ç æ˜¯ç‹¬ç«‹çš„</span></span>
<span id="cb2-10"><a href="#cb2-10"></a><span class="fu">sudo</span> smbpasswd -a cuc</span>
<span id="cb2-11"><a href="#cb2-11"></a></span>
<span id="cb2-12"><a href="#cb2-12"></a><span class="co"># åˆ›å»ºæµ‹è¯•ç”¨å…±äº«ç›®å½•</span></span>
<span id="cb2-13"><a href="#cb2-13"></a><span class="fu">sudo</span> mkdir -p /srv/samba/demo</span>
<span id="cb2-14"><a href="#cb2-14"></a><span class="fu">sudo</span> chown -R demoUser:demoGroup /srv/samba/demo</span></code></pre></div>
<hr />
<div class="sourceCode" id="cb3"><pre class="sourceCode ini"><code class="sourceCode ini"><span id="cb3-1"><a href="#cb3-1"></a><span class="co"># åœ¨/etc/samba/smb.conf æ–‡ä»¶å°¾éƒ¨è¿½åŠ ä»¥ä¸‹â€œå…±äº«ç›®å½•â€é…ç½®</span></span>
<span id="cb3-2"><a href="#cb3-2"></a><span class="kw">[demo]</span></span>
<span id="cb3-3"><a href="#cb3-3"></a><span class="dt">        path </span><span class="ot">=</span><span class="st"> /srv/samba/demo/</span></span>
<span id="cb3-4"><a href="#cb3-4"></a><span class="dt">        read only </span><span class="ot">=</span><span class="st"> </span><span class="kw">no</span></span>
<span id="cb3-5"><a href="#cb3-5"></a><span class="dt">        guest ok </span><span class="ot">=</span><span class="st"> </span><span class="kw">no</span></span>
<span id="cb3-6"><a href="#cb3-6"></a><span class="dt">        force create mode </span><span class="ot">=</span><span class="st"> </span><span class="dv">0660</span></span>
<span id="cb3-7"><a href="#cb3-7"></a><span class="dt">        force directory mode </span><span class="ot">=</span><span class="st"> </span><span class="dv">2770</span></span>
<span id="cb3-8"><a href="#cb3-8"></a><span class="dt">        force user </span><span class="ot">=</span><span class="st"> demoUser</span></span>
<span id="cb3-9"><a href="#cb3-9"></a><span class="dt">        force group </span><span class="ot">=</span><span class="st"> demoGroup</span></span>
<span id="cb3-10"><a href="#cb3-10"></a><span class="co"># Forced Parameters å¯ä»¥å¼ºåˆ¶æ‰€æœ‰è¿æ¥å…±äº«ç›®å½•çš„ç”¨æˆ·åˆ›å»ºçš„æ–‡ä»¶ã€ç›®å½•ä½¿ç”¨ç‰¹å®šçš„æƒé™ä½è®¾å®šã€å±ä¸»ç”¨æˆ·å’Œå±ä¸»ç»„ï¼ˆæœ‰å®‰å…¨é£é™©ï¼‰</span></span></code></pre></div>
<hr />
<h2 id="smbclient">smbclient</h2>
<ul>
<li>åˆ†åˆ«æŸ¥çœ‹åŸºäº Windows å’Œ Linux æ­å»º SMB å…±äº«æœåŠ¡åŒ…å«çš„å…±äº«ç›®å½•æ¸…å•</li>
<li>å‘è¿œç¨‹å…±äº«ç›®å½•ä¸Šä¼ æ–‡ä»¶å’Œç›®å½•</li>
<li>ä»è¿œç¨‹å…±äº«ç›®å½•ä¸­ä¸‹è½½æ–‡ä»¶å’Œç›®å½•</li>
</ul>
<hr />
<h2 id="smbclient-faq">smbclient æ“ä½œé€ŸæŸ¥</h2>
<div class="sourceCode" id="cb4"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1"></a><span class="fu">sudo</span> apt-get install smbclient</span>
<span id="cb4-2"><a href="#cb4-2"></a></span>
<span id="cb4-3"><a href="#cb4-3"></a><span class="co"># æŸ¥çœ‹è¿œç¨‹ SMB å…±äº«æœåŠ¡çš„å…±äº«ç›®å½•æ¸…å•</span></span>
<span id="cb4-4"><a href="#cb4-4"></a><span class="co"># Linux æ­å»ºçš„ SMB å…±äº«æœåŠ¡</span></span>
<span id="cb4-5"><a href="#cb4-5"></a><span class="ex">smbclient</span> -L 192.168.56.193 -U demoUser</span>
<span id="cb4-6"><a href="#cb4-6"></a><span class="co"># Enter WORKGROUP\demoUser&#39;s password:</span></span>
<span id="cb4-7"><a href="#cb4-7"></a><span class="co"># </span></span>
<span id="cb4-8"><a href="#cb4-8"></a><span class="co">#   Sharename       Type      Comment</span></span>
<span id="cb4-9"><a href="#cb4-9"></a><span class="co">#   ---------       ----      -------</span></span>
<span id="cb4-10"><a href="#cb4-10"></a><span class="co">#   print$          Disk      Printer Drivers</span></span>
<span id="cb4-11"><a href="#cb4-11"></a><span class="co">#   demo            Disk</span></span>
<span id="cb4-12"><a href="#cb4-12"></a><span class="co">#   IPC$            IPC       IPC Service (cuc-lab server (Samba, Ubuntu))</span></span>
<span id="cb4-13"><a href="#cb4-13"></a><span class="co"># SMB1 disabled -- no workgroup available</span></span>
<span id="cb4-14"><a href="#cb4-14"></a></span>
<span id="cb4-15"><a href="#cb4-15"></a><span class="co"># Windows æ­å»ºçš„ SMB å…±äº«æœåŠ¡</span></span>
<span id="cb4-16"><a href="#cb4-16"></a><span class="ex">smbclient</span> -L 192.168.56.182 -U demo</span>
<span id="cb4-17"><a href="#cb4-17"></a><span class="co"># Enter WORKGROUP\demo&#39;s password:</span></span>
<span id="cb4-18"><a href="#cb4-18"></a><span class="co"># </span></span>
<span id="cb4-19"><a href="#cb4-19"></a><span class="co">#   Sharename       Type      Comment</span></span>
<span id="cb4-20"><a href="#cb4-20"></a><span class="co">#   ---------       ----      -------</span></span>
<span id="cb4-21"><a href="#cb4-21"></a><span class="co">#   anon_share      Disk</span></span>
<span id="cb4-22"><a href="#cb4-22"></a><span class="co">#   IPC$            IPC       è¿œç¨‹ IPC</span></span>
<span id="cb4-23"><a href="#cb4-23"></a><span class="co">#   smb_share       Disk</span></span>
<span id="cb4-24"><a href="#cb4-24"></a><span class="co"># SMB1 disabled -- no workgroup available</span></span>
<span id="cb4-25"><a href="#cb4-25"></a></span>
<span id="cb4-26"><a href="#cb4-26"></a><span class="co"># è¿æ¥æŒ‡å®šå…±äº«ç›®å½•</span></span>
<span id="cb4-27"><a href="#cb4-27"></a><span class="ex">smbclient</span> //192.168.56.193/demo -U cuc</span>
<span id="cb4-28"><a href="#cb4-28"></a><span class="co"># è¾“å…¥å¯†ç </span></span>
<span id="cb4-29"><a href="#cb4-29"></a></span>
<span id="cb4-30"><a href="#cb4-30"></a><span class="co"># ä¸‹è½½æ•´ä¸ªæ–‡ä»¶å¤¹</span></span>
<span id="cb4-31"><a href="#cb4-31"></a><span class="ex">tarmode</span></span>
<span id="cb4-32"><a href="#cb4-32"></a><span class="ex">recurse</span></span>
<span id="cb4-33"><a href="#cb4-33"></a><span class="ex">prompt</span></span>
<span id="cb4-34"><a href="#cb4-34"></a><span class="co">## ä¸‹è½½æŒ‡å®šç›®å½• target_dir</span></span>
<span id="cb4-35"><a href="#cb4-35"></a><span class="ex">mget</span> target_dir</span>
<span id="cb4-36"><a href="#cb4-36"></a><span class="co">## ä¸‹è½½æ‰€æœ‰ç›®å½•å’Œæ–‡ä»¶</span></span>
<span id="cb4-37"><a href="#cb4-37"></a><span class="ex">mget</span> *</span></code></pre></div>
<h1 id="windows-share-faq">SMB å…±äº«å®éªŒ FAQ</h1>
<hr />
<ul>
<li>æ— æ³• ping é€š Windows ä¸»æœº</li>
<li>è®¾ç½®ä½¿ç”¨éå½“å‰ç™»å½•è´¦å·ä½œä¸º SMB å…±äº«ç”¨æˆ·</li>
<li>å‘å…±äº«ç›®å½•å†™å…¥æ–‡ä»¶å¤±è´¥</li>
</ul>
<hr />
<h2 id="æ— æ³•-ping-é€š-windows-ä¸»æœº">æ— æ³• ping é€š Windows ä¸»æœº</h2>
<ul>
<li>æ£€æŸ¥ã€Œå„å±‚ã€ç½‘ç»œè¿é€šæ€§</li>
<li>æ’æŸ¥ Windows é˜²ç«å¢™è®¾ç½®</li>
</ul>
<hr />
<h3 id="windows-fw-config-0">é…ç½® Windows é˜²ç«å¢™ç­–ç•¥</h3>
<ul>
<li><code>å¼€å§‹èœå•</code> â€“&gt; <code>gpedit.msc</code> â€“&gt; <code>Windows è®¾ç½®</code> â€“&gt; <code>å®‰å…¨è®¾ç½®</code> â€“&gt; <code>ç½‘ç»œåˆ—è¡¨ç®¡ç†å™¨ç­–ç•¥</code> â€“&gt; <code>æ— æ³•è¯†åˆ«çš„ç½‘ç»œ</code>
<ul>
<li>ä½ç½®ç±»å‹ï¼šä¸“ç”¨</li>
<li>ç”¨æˆ·æƒé™ï¼šç”¨æˆ·å¯ä»¥æ›´æ”¹ä½ç½®</li>
</ul></li>
</ul>
<hr />
<h3 id="windows-fw-config-1">é…ç½® Windows é˜²ç«å¢™ç­–ç•¥</h3>
<p><img src="images/chap0x06/windows-fw-config-1.png" /></p>
<hr />
<h3 id="windows-fw-config-2">é…ç½® Windows é˜²ç«å¢™ç­–ç•¥</h3>
<p><img src="images/chap0x06/windows-fw-config-2.png" /></p>
<hr />
<h2 id="è®¾ç½®ä½¿ç”¨éå½“å‰ç™»å½•è´¦å·ä½œä¸º-smb-å…±äº«ç”¨æˆ·">è®¾ç½®ä½¿ç”¨éå½“å‰ç™»å½•è´¦å·ä½œä¸º SMB å…±äº«ç”¨æˆ·</h2>
<div class="sourceCode" id="cb5"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1"></a><span class="co"># åœ¨ Windows CMD ä¸­è¾“å…¥ä»¥ä¸‹å‘½ä»¤å®Œæˆç”¨æˆ·æ·»åŠ ä¸å£ä»¤è®¾ç½®</span></span>
<span id="cb5-2"><a href="#cb5-2"></a><span class="co"># æ·»åŠ ç”¨æˆ· demo å¯†ç ä¸º pass ç”¨äºè®¿é—®å…±äº«æ–‡ä»¶å¤¹</span></span>
<span id="cb5-3"><a href="#cb5-3"></a><span class="ex">net</span> user demo pass /ADD</span>
<span id="cb5-4"><a href="#cb5-4"></a></span>
<span id="cb5-5"><a href="#cb5-5"></a><span class="co"># å®éªŒå®Œæ¯• åˆ é™¤ç”¨æˆ·</span></span>
<span id="cb5-6"><a href="#cb5-6"></a><span class="ex">net</span> user demo /DELETE</span></code></pre></div>
<hr />
<h2 id="å‘å…±äº«ç›®å½•å†™å…¥æ–‡ä»¶å¤±è´¥">å‘å…±äº«ç›®å½•å†™å…¥æ–‡ä»¶å¤±è´¥</h2>
<ul>
<li>ç›®å½•å†™å…¥æƒé™è®¾ç½®æ£€æŸ¥</li>
<li><code>put</code> åªæ”¯æŒä¸Šä¼  <strong>å½“å‰ç›®å½•ä¸‹</strong> æ–‡ä»¶</li>
<li>åœ¨ SMB äº¤äº’å¼ç»ˆç«¯ä¸­é€šè¿‡ <code>!</code> å‘½ä»¤å‰ç¼€æ‰§è¡Œæœ¬åœ° <code>shell</code> å‘½ä»¤</li>
</ul>
<div class="sourceCode" id="cb6"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1"></a><span class="ex">smb</span>: <span class="dt">\&gt;</span> ls</span>
<span id="cb6-2"><a href="#cb6-2"></a><span class="co">#   .                                   D        0  Thu Apr 22 05:38:17 2021</span></span>
<span id="cb6-3"><a href="#cb6-3"></a><span class="co">#   ..                                  D        0  Thu Apr 22 05:38:17 2021</span></span>
<span id="cb6-4"><a href="#cb6-4"></a><span class="co">#   upload_demo                         A       12  Fri Apr 16 03:16:19 2021</span></span>
<span id="cb6-5"><a href="#cb6-5"></a><span class="co">#   æ–°å»ºæ–‡ä»¶å¤¹                     D        0  Thu Apr 22 06:57:22 2021</span></span>
<span id="cb6-6"><a href="#cb6-6"></a><span class="co"># </span></span>
<span id="cb6-7"><a href="#cb6-7"></a><span class="co">#                 33405695 blocks of size 4096. 21963037 blocks available</span></span>
<span id="cb6-8"><a href="#cb6-8"></a><span class="ex">smb</span>: <span class="dt">\&gt;</span> !ls -la</span>
<span id="cb6-9"><a href="#cb6-9"></a><span class="co"># total 52</span></span>
<span id="cb6-10"><a href="#cb6-10"></a><span class="co"># drwxr-xr-x 6 cuc  cuc  4096 Apr 22 23:09 .</span></span>
<span id="cb6-11"><a href="#cb6-11"></a><span class="co"># drwxr-xr-x 3 root root 4096 Feb 20 11:21 ..</span></span>
<span id="cb6-12"><a href="#cb6-12"></a><span class="co"># drwx------ 3 cuc  cuc  4096 Apr 12 01:31 .ansible</span></span>
<span id="cb6-13"><a href="#cb6-13"></a><span class="co"># -rw------- 1 cuc  cuc  2472 Apr 22 07:53 .bash_history</span></span>
<span id="cb6-14"><a href="#cb6-14"></a><span class="co"># -rw-r--r-- 1 cuc  cuc   220 Feb 25  2020 .bash_logout</span></span>
<span id="cb6-15"><a href="#cb6-15"></a><span class="co"># -rw-r--r-- 1 cuc  cuc  3789 Apr 12 06:40 .bashrc</span></span>
<span id="cb6-16"><a href="#cb6-16"></a><span class="co"># drwx------ 2 cuc  cuc  4096 Feb 20 11:43 .cache</span></span>
<span id="cb6-17"><a href="#cb6-17"></a><span class="co"># -rw------- 1 cuc  cuc    39 Apr 22 06:33 .lesshst</span></span>
<span id="cb6-18"><a href="#cb6-18"></a><span class="co"># -rw-r--r-- 1 cuc  cuc   807 Feb 25  2020 .profile</span></span>
<span id="cb6-19"><a href="#cb6-19"></a><span class="co"># drwx------ 2 cuc  cuc  4096 Apr 12 01:31 .ssh</span></span>
<span id="cb6-20"><a href="#cb6-20"></a><span class="co"># -rw-r--r-- 1 cuc  cuc     0 Feb 20 11:44 .sudo_as_admin_successful</span></span>
<span id="cb6-21"><a href="#cb6-21"></a><span class="co"># -rw-rw-r-- 1 cuc  cuc     0 Apr 22 23:09 test</span></span>
<span id="cb6-22"><a href="#cb6-22"></a><span class="co"># -rw-rw-r-- 1 cuc  cuc    12 Apr 22 06:02 upload_demo</span></span>
<span id="cb6-23"><a href="#cb6-23"></a><span class="co"># -rw------- 1 cuc  cuc   867 Apr 22 06:18 .viminfo</span></span>
<span id="cb6-24"><a href="#cb6-24"></a><span class="co"># drwxrwxr-x 3 cuc  cuc  4096 Apr 22 06:57 æ–°å»ºæ–‡ä»¶å¤¹</span></span>
<span id="cb6-25"><a href="#cb6-25"></a></span>
<span id="cb6-26"><a href="#cb6-26"></a><span class="ex">smb</span>: <span class="dt">\&gt;</span> help lcd</span>
<span id="cb6-27"><a href="#cb6-27"></a><span class="co"># HELP lcd:</span></span>
<span id="cb6-28"><a href="#cb6-28"></a><span class="co">#   [directory] change/report the local current working directory</span></span></code></pre></div>
<hr />
<h3 id="ç›®å½•å†™å…¥æƒé™è®¾ç½®æ£€æŸ¥">ç›®å½•å†™å…¥æƒé™è®¾ç½®æ£€æŸ¥</h3>
<div class="sourceCode" id="cb7"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1"></a><span class="co"># Linux å®¿ä¸»æœº</span></span>
<span id="cb7-2"><a href="#cb7-2"></a><span class="fu">ls</span> -ld /srv/samba/demo/</span>
<span id="cb7-3"><a href="#cb7-3"></a><span class="co"># drwxr-xr-x 2 demoUser demoGroup 4096 Apr 22 05:35 /srv/samba/demo/</span></span>
<span id="cb7-4"><a href="#cb7-4"></a></span>
<span id="cb7-5"><a href="#cb7-5"></a><span class="co"># Windows å®¿ä¸»æœº</span></span></code></pre></div>
<h1 id="windows-rm-intro">è¿œç¨‹ç®¡ç† Windows ä¸»æœºç®€ä»‹</h1>
<hr />
<h2 id="å¸¸è§è¿œç¨‹ç®¡ç†æ–¹å¼">å¸¸è§è¿œç¨‹ç®¡ç†æ–¹å¼</h2>
<ul>
<li>GUI: Windows è¿œç¨‹æ¡Œé¢</li>
<li>CLI
<ul>
<li><a href="https://docs.microsoft.com/en-us/powershell/scripting/learn/remoting/running-remote-commands">Powershell Remote</a></li>
<li><a href="https://docs.microsoft.com/en-us/windows-server/administration/openssh/openssh_overview">SSH</a></li>
</ul></li>
</ul>
<hr />
<h3 id="windows-rdp">Windows è¿œç¨‹æ¡Œé¢</h3>
<ul>
<li><a href="https://support.microsoft.com/zh-cn/windows/%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8%E8%BF%9C%E7%A8%8B%E6%A1%8C%E9%9D%A2-5fe128d5-8fb1-7a23-3b8a-41e636865e8c">å¾®è½¯å®˜æ–¹æ–‡æ¡£: å¦‚ä½•ä½¿ç”¨è¿œç¨‹æ¡Œé¢ Windows 10</a></li>
<li><a href="https://github.com/stascorp/rdpwrap">Windows 10 Home ç‰ˆå¼€å¯è¿œç¨‹æ¡Œé¢: stascorp/rdpwrap</a></li>
</ul>
<hr />
<h3 id="sshd-configure-1">CLI - OpenSSH Server</h3>
<ul>
<li>å®‰è£… Windows å¯é€‰åŠŸèƒ½ç»„ä»¶ï¼š<code>OpenSSH Server</code></li>
</ul>
<p><img src="images/chap0x06/install-openssh-server.png" /></p>
<hr />
<h3 id="sshd-configure-2">CLI - OpenSSH Server</h3>
<ul>
<li>å¯åŠ¨å¹¶é…ç½® <code>OpenSSH Server</code> å¼€æœºè‡ªå¯åŠ¨</li>
</ul>
<div class="sourceCode" id="cb8"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1"></a><span class="co"># ä»¥ä¸‹ä»£ç éœ€è¦åœ¨ã€Œç®¡ç†å‘˜æƒé™ã€çš„ PowerShell ä¸­æ‰§è¡Œ</span></span>
<span id="cb8-2"><a href="#cb8-2"></a><span class="ex">Start-Service</span> sshd</span>
<span id="cb8-3"><a href="#cb8-3"></a><span class="co"># OPTIONAL but recommended:</span></span>
<span id="cb8-4"><a href="#cb8-4"></a><span class="ex">Set-Service</span> -Name sshd -StartupType <span class="st">&#39;Automatic&#39;</span></span>
<span id="cb8-5"><a href="#cb8-5"></a><span class="co"># Confirm the firewall rule is configured. It should be created automatically by setup.</span></span>
<span id="cb8-6"><a href="#cb8-6"></a><span class="ex">Get-NetFirewallRule</span> -Name *ssh*</span>
<span id="cb8-7"><a href="#cb8-7"></a><span class="co"># There should be a firewall rule named &quot;OpenSSH-Server-In-TCP&quot;, which should be enabled</span></span>
<span id="cb8-8"><a href="#cb8-8"></a><span class="co"># If the firewall does not exist, create one</span></span>
<span id="cb8-9"><a href="#cb8-9"></a><span class="ex">New-NetFirewallRule</span> -Name sshd -DisplayName <span class="st">&#39;OpenSSH Server (sshd)&#39;</span> -Enabled True -Direction Inbound -Protocol TCP -Action Allow -LocalPort 22</span></code></pre></div>
<hr />
<h3 id="sshd-configure-3">CLI - OpenSSH Server</h3>
<ul>
<li>é…ç½® OpenSSH å®¢æˆ·ç«¯è¿æ¥åå¯åŠ¨çš„é»˜è®¤ Shell ä¸º <code>PowerShell</code></li>
</ul>
<div class="sourceCode" id="cb9"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1"></a><span class="co"># ä»¥ä¸‹ä»£ç éœ€è¦åœ¨ã€Œç®¡ç†å‘˜æƒé™ã€çš„ PowerShell ä¸­æ‰§è¡Œ</span></span>
<span id="cb9-2"><a href="#cb9-2"></a><span class="ex">New-ItemProperty</span> -Path <span class="st">&quot;HKLM:\SOFTWARE\OpenSSH&quot;</span> -Name DefaultShell -Value <span class="st">&quot;C:\Windows\System32\WindowsPowerShell\v1.0\powershell.exe&quot;</span> -PropertyType String -Force</span></code></pre></div>
<hr />
<h3 id="sshd-configure-4">CLI - OpenSSH Server</h3>
<ul>
<li>é…ç½® SSH å…å¯†ç™»å½•</li>
</ul>
<div class="sourceCode" id="cb10"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1"></a><span class="co"># ä¸èƒ½ä½¿ç”¨ ssh-copy-id</span></span>
<span id="cb10-2"><a href="#cb10-2"></a></span>
<span id="cb10-3"><a href="#cb10-3"></a><span class="co"># åœ¨ã€Œç®¡ç†å‘˜æƒé™ã€çš„ powershell ä¸­æ‰§è¡Œä»¥ä¸‹å‘½ä»¤</span></span>
<span id="cb10-4"><a href="#cb10-4"></a><span class="bu">cd</span> <span class="va">$ENV</span>:PROGRAMDATA/ssh</span>
<span id="cb10-5"><a href="#cb10-5"></a><span class="ex">New-Item</span> -ItemType file administrators_authorized_keys</span>
<span id="cb10-6"><a href="#cb10-6"></a></span>
<span id="cb10-7"><a href="#cb10-7"></a><span class="co"># å°†å…¬é’¥æŒ‡çº¹ä¿¡æ¯å†™å…¥ä¸Šè¿°æ–°åˆ›å»ºçš„ administrators_authorized_keys</span></span>
<span id="cb10-8"><a href="#cb10-8"></a><span class="co"># è¯·è‡ªè¡Œæ›¿æ¢ä»¥ä¸‹ &lt;&gt; å†…çš„å…¬é’¥æŒ‡çº¹ä¿¡æ¯</span></span>
<span id="cb10-9"><a href="#cb10-9"></a><span class="co"># è¿™é‡Œçš„ -encoding ascii éå¸¸é‡è¦ï¼Œå› ä¸ºé»˜è®¤ä¸ä½¿ç”¨è¯¥å‚æ•°æ—¶</span></span>
<span id="cb10-10"><a href="#cb10-10"></a><span class="co"># Out-File å†™å…¥çš„æ–‡æœ¬æ˜¯åŒå­—èŠ‚ç¼–ç ä¸”ä½¿ç”¨äº† BOM æ–‡ä»¶å¤´</span></span>
<span id="cb10-11"><a href="#cb10-11"></a><span class="bu">echo</span> <span class="st">&#39;&lt;content-of-id_rsa.pub&gt;&#39;</span> <span class="kw">|</span> <span class="ex">Out-File</span> -encoding ascii administrators_authorized_keys</span>
<span id="cb10-12"><a href="#cb10-12"></a></span>
<span id="cb10-13"><a href="#cb10-13"></a><span class="co"># æ£€æŸ¥è‡ªå·±ä½¿ç”¨çš„ PowerShell ç‰ˆæœ¬</span></span>
<span id="cb10-14"><a href="#cb10-14"></a><span class="co"># $PSVersionTable</span></span>
<span id="cb10-15"><a href="#cb10-15"></a></span>
<span id="cb10-16"><a href="#cb10-16"></a><span class="co"># Name                           Value</span></span>
<span id="cb10-17"><a href="#cb10-17"></a><span class="co"># ----                           -----</span></span>
<span id="cb10-18"><a href="#cb10-18"></a><span class="co"># PSVersion                      5.1.19041.906</span></span>
<span id="cb10-19"><a href="#cb10-19"></a><span class="co"># PSEdition                      Desktop</span></span>
<span id="cb10-20"><a href="#cb10-20"></a><span class="co"># PSCompatibleVersions           {1.0, 2.0, 3.0, 4.0...}</span></span>
<span id="cb10-21"><a href="#cb10-21"></a><span class="co"># BuildVersion                   10.0.19041.906</span></span>
<span id="cb10-22"><a href="#cb10-22"></a><span class="co"># CLRVersion                     4.0.30319.42000</span></span>
<span id="cb10-23"><a href="#cb10-23"></a><span class="co"># WSManStackVersion              3.0</span></span>
<span id="cb10-24"><a href="#cb10-24"></a><span class="co"># PSRemotingProtocolVersion      2.3</span></span>
<span id="cb10-25"><a href="#cb10-25"></a><span class="co"># SerializationVersion           1.1.0.1</span></span>
<span id="cb10-26"><a href="#cb10-26"></a></span>
<span id="cb10-27"><a href="#cb10-27"></a><span class="co"># ref: https://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.utility/out-file?view=powershell-5.1</span></span>
<span id="cb10-28"><a href="#cb10-28"></a><span class="co"># 5.1 ç‰ˆ Powershell ä½¿ç”¨ Out-File å†™å…¥æ–‡ä»¶æ—¶æ‰€æœ‰å¤šå­—èŠ‚ç¼–ç æ–¹å¼å‡ç”¨åˆ°äº† BOM å¤´</span></span>
<span id="cb10-29"><a href="#cb10-29"></a></span>
<span id="cb10-30"><a href="#cb10-30"></a><span class="co"># ref: https://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.utility/out-file?view=powershell-7</span></span>
<span id="cb10-31"><a href="#cb10-31"></a><span class="co"># 7.0+ ç‰ˆ Powershell æä¾›äº† utf8NoBOM ç¼–ç æ–¹å¼</span></span>
<span id="cb10-32"><a href="#cb10-32"></a></span>
<span id="cb10-33"><a href="#cb10-33"></a><span class="co"># é…ç½®ä¸Šè¿° administrators_authorized_keys æ­£ç¡®çš„å±ä¸»å’Œè®¿é—®æƒé™</span></span>
<span id="cb10-34"><a href="#cb10-34"></a><span class="va">$acl</span> = <span class="ex">Get-Acl</span> <span class="va">$ENV</span>:PROGRAMDATA\ssh\administrators_authorized_keys</span>
<span id="cb10-35"><a href="#cb10-35"></a><span class="va">$acl</span><span class="ex">.SetAccessRuleProtection</span>(<span class="va">$true</span>, <span class="va">$false</span>)</span>
<span id="cb10-36"><a href="#cb10-36"></a><span class="va">$administratorsRule</span> = <span class="ex">New-Object</span> system.security.accesscontrol.filesystemaccessrule(<span class="st">&quot;Administrators&quot;</span>,<span class="st">&quot;FullControl&quot;</span>,<span class="st">&quot;Allow&quot;</span>)</span>
<span id="cb10-37"><a href="#cb10-37"></a><span class="va">$systemRule</span> = <span class="ex">New-Object</span> system.security.accesscontrol.filesystemaccessrule(<span class="st">&quot;SYSTEM&quot;</span>,<span class="st">&quot;FullControl&quot;</span>,<span class="st">&quot;Allow&quot;</span>)</span>
<span id="cb10-38"><a href="#cb10-38"></a><span class="va">$acl</span><span class="ex">.SetAccessRule</span>(<span class="va">$administratorsRule</span>)</span>
<span id="cb10-39"><a href="#cb10-39"></a><span class="va">$acl</span><span class="ex">.SetAccessRule</span>(<span class="va">$systemRule</span>)</span>
<span id="cb10-40"><a href="#cb10-40"></a><span class="va">$acl</span> <span class="kw">|</span> <span class="ex">Set-Acl</span></span>
<span id="cb10-41"><a href="#cb10-41"></a></span>
<span id="cb10-42"><a href="#cb10-42"></a><span class="co"># æ£€æŸ¥ administrators_authorized_keys æ–‡ä»¶çš„æƒé™è®¾ç½®</span></span>
<span id="cb10-43"><a href="#cb10-43"></a><span class="co"># Access ä¸€é¡¹åªèƒ½ä¸”å¿…é¡»åªæœ‰ </span></span>
<span id="cb10-44"><a href="#cb10-44"></a><span class="co"># Access : NT AUTHORITY\SYSTEM Allow  FullControl</span></span>
<span id="cb10-45"><a href="#cb10-45"></a><span class="co">#          BUILTIN\Administrators Allow  FullControl</span></span>
<span id="cb10-46"><a href="#cb10-46"></a><span class="ex">get-acl</span> .\administrators_authorized_keys <span class="kw">|</span> <span class="ex">fl</span></span>
<span id="cb10-47"><a href="#cb10-47"></a><span class="co"># Path   : Microsoft.PowerShell.Core\FileSystem::C:\ProgramData\ssh\administrators_authorized_keys</span></span>
<span id="cb10-48"><a href="#cb10-48"></a><span class="co"># Owner  : BUILTIN\Administrators</span></span>
<span id="cb10-49"><a href="#cb10-49"></a><span class="co"># Group  : DESKTOP-HQOR9HG\None</span></span>
<span id="cb10-50"><a href="#cb10-50"></a><span class="co"># Access : NT AUTHORITY\SYSTEM Allow  FullControl</span></span>
<span id="cb10-51"><a href="#cb10-51"></a><span class="co">#          BUILTIN\Administrators Allow  FullControl</span></span>
<span id="cb10-52"><a href="#cb10-52"></a><span class="co"># Audit  :</span></span>
<span id="cb10-53"><a href="#cb10-53"></a><span class="co"># Sddl   : O:BAG:S-1-5-21-3489025807-4051503630-1690866609-513D:PAI(A;;FA;;;SY)(A;;FA;;;BA)</span></span></code></pre></div>
<hr />
<h3 id="sshd-configure-5">CLI - OpenSSH Server</h3>
<ul>
<li>ä» Linux ä¸»æœºè·å–å¼€å¯ OpenSSH Server çš„ Windows ä¸»æœºä¸Šçš„æ–‡ä»¶</li>
</ul>
<div class="sourceCode" id="cb11"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1"></a><span class="co"># æ³¨æ„ Windows è·¯å¾„åˆ†éš”ç¬¦è¦ä½¿ç”¨ / è€Œä¸æ˜¯ \</span></span>
<span id="cb11-2"><a href="#cb11-2"></a><span class="fu">scp</span> demo@192.168.56.182:c:/programdata/ssh/administrators_authorized_keys ./</span></code></pre></div>
<h1 id="ç§»åŠ¨äº’è”æ—¶ä»£çš„æ–‡ä»¶å…±äº«">ç§»åŠ¨äº’è”æ—¶ä»£çš„æ–‡ä»¶å…±äº«</h1>
<hr />
<h2 id="åŠŸèƒ½ç‰¹æ€§">åŠŸèƒ½ç‰¹æ€§</h2>
<ul>
<li>å¤šç»ˆç«¯å¹³å°æ”¯æŒ: PC / macOS / iOS / Android / â€¦</li>
<li>æ–‡ä»¶å˜æ›´è‡ªåŠ¨åœ¨å¤šç»ˆç«¯å¹³å°åŒæ­¥</li>
<li><strong>åŠ åˆ†ç‚¹</strong> åŠ å¯†å’Œéšç§ä¿æŠ¤</li>
<li><strong>åŠ åˆ†ç‚¹</strong> æ”¯æŒæ•°æ®çš„ç‰©ç†å­˜å‚¨è‡ªå·±ç®¡ç†</li>
</ul>
<hr />
<h2 id="å¼€æºè§£å†³æ–¹æ¡ˆ">å¼€æºè§£å†³æ–¹æ¡ˆ</h2>
<ul>
<li><a href="https://github.com/awesome-selfhosted/awesome-selfhosted#file-transfersynchronization">è‡ªå»ºæ–‡ä»¶ä¼ è¾“/åŒæ­¥è§£å†³æ–¹æ¡ˆ</a>
<ul>
<li><a href="https://owncloud.org/">ownCloud</a></li>
<li><a href="https://www.seafile.com/home/">Seafile</a></li>
<li><a href="https://syncthing.net/">Syncthing</a></li>
</ul></li>
</ul>
<h1 id="å‚è€ƒæ–‡çŒ®">å‚è€ƒæ–‡çŒ®</h1>
<hr />
<ul>
<li><a href="https://help.ubuntu.com/lts/serverguide/ftp-server.html">FTP Server from Ubuntu Official Documentation</a></li>
<li><a href="https://www.digitalocean.com/community/tutorials/how-to-set-up-an-nfs-mount-on-ubuntu-16-04">How To Set Up an NFS Mount on Ubuntu 16.04</a></li>
<li><a href="https://help.ubuntu.com/lts/serverguide/samba.html.en">Samba from Ubuntu Official Documentation</a></li>
<li><a href="https://help.ubuntu.com/community/Samba/SambaClientGuide">Samba/SambaClientGuide from Ubuntu Official Documentation</a></li>
<li><a href="https://wiki.samba.org/index.php/Setting_up_Samba_as_a_Standalone_Server">Setting up Samba as a Standalone Server from Samba Official Wiki</a></li>
<li><a href="https://wiki.samba.org/index.php/Mounting_samba_shares_from_a_unix_client">Mounting samba shares from a unix client from Samba Official Wiki</a></li>
<li><a href="https://msdn.microsoft.com/zh-cn/library/windows/desktop/aa365233(v=vs.85).aspx">Microsoft SMB Protocol and CIFS Protocol Overview from MSDN</a></li>
</ul>
</body>
</html>
